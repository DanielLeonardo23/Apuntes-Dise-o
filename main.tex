\documentclass[a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{mathptmx} % Paquete para cambiar a Times New Roman
\usepackage[left=2.54cm, right=2.54cm, top=2.54cm, bottom=2.54cm]{geometry}
\usepackage{tocloft} % Paquete para el control del índice
\usepackage{float} % Para obligar la posición de las figuras
\usepackage{listings} % Para el código fuente
\usepackage{setspace} % Paquete para configurar el interlineado
\usepackage{booktabs} % Para mejorar el aspecto de las tablas
\usepackage{sectsty} % Paquete para configurar el tamaño de los títulos
\usepackage{hyperref}
\usepackage{xcolor} % Paquete para colores

% Configuración de colores para imitar Visual Studio Code
\definecolor{vscodebg}{rgb}{0.18, 0.18, 0.18}
\definecolor{vscodetext}{rgb}{0.9, 0.9, 0.9}
\definecolor{vscodekeyword}{rgb}{0.76, 0.37, 0.91}
\definecolor{vscodecomment}{rgb}{0.5, 0.5, 0.5}
\definecolor{vscodestring}{rgb}{0.58, 0.94, 0.56}
\definecolor{vscodeidentifier}{rgb}{0.48, 0.83, 0.98}
\definecolor{vscodeframe}{rgb}{0.0, 0.0, 0.5}

\lstset{
  backgroundcolor=\color{vscodebg},
  basicstyle=\ttfamily\footnotesize\color{vscodetext},
  keywordstyle=\color{vscodekeyword}\bfseries,
  commentstyle=\color{vscodecomment}\itshape,
  stringstyle=\color{vscodestring},
  identifierstyle=\color{vscodeidentifier},
  frame=single,
  framexleftmargin=15pt,
  framexrightmargin=15pt,
  framexbottommargin=5pt,
  framextopmargin=5pt,
  framerule=1pt,
  rulecolor=\color{vscodeframe},
  breaklines=true,
  numbers=left,
  numberstyle=\tiny\color{vscodetext},
  captionpos=b,
  tabsize=2,
  showspaces=false,
  showstringspaces=false,
  language=Python,
  title=\lstname
}

\doublespacing % Establece el interlineado a doble espacio

% Configuración de los títulos
\allsectionsfont{\normalsize}

% Redefinir el entorno thebibliography para que no incluya el título por defecto
\usepackage{etoolbox}
\patchcmd{\thebibliography}{\section*{\refname}}{}{}{}

\begin{document}

\input{portada}

\newpage

% Temporalmente desactivar la entrada del índice para el ToC
\addtocontents{toc}{\protect\setcounter{tocdepth}{-1}}
\renewcommand{\contentsname}{Índice} % Cambiar el nombre del índice
\tableofcontents
\addtocontents{toc}{\protect\setcounter{tocdepth}{2}}
\newpage

\input{introduccion}
\newpage
\input{objetivos}
\newpage
\input{planteamiento_problema}
\newpage
\input{cambio_de_monedas}
\newpage
\input{problema_de_la_mochila}
\newpage
\input{problema_distancias_cortas}
\newpage
\input{conclusiones}
\newpage
\input{anexos}
\newpage
% Añadir manualmente "Referencia" al índice
\section*{Referencia}
\addcontentsline{toc}{section}{Referencia}

% Incluir las referencias desde otro archivo sin duplicar el título
\input{referencia}
\newpage

\end{document}
